# =============================================================================
# LUNA Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in the actual values for your environment.
# DO NOT commit .env to version control - it contains sensitive information.
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# Async Database Connection URL (for FastAPI services)
# Format: postgresql+asyncpg://USERNAME:PASSWORD@HOST:PORT/DATABASE_NAME
# - Uses asyncpg driver for async/await database operations
# - Used by FastAPI services for database queries
# - If using Docker Compose: postgresql+asyncpg://luna_user:luna_password@localhost:5432/luna_db
# - If using local Postgres: Replace USERNAME, PASSWORD, HOST, PORT, DATABASE_NAME with your values
DATABASE_URL=postgresql+asyncpg://YOUR_USER:YOUR_PASSWORD@localhost:5432/YOUR_DATABASE

# Synchronous Database Connection URL (for Alembic migrations)
# Format: postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE_NAME
# - Uses psycopg2 driver for synchronous operations
# - Required by Alembic migration tool (doesn't support async)
# - Must match DATABASE_URL credentials, but without the +asyncpg driver specifier
# - If using Docker Compose: postgresql://luna_user:luna_password@localhost:5432/luna_db
DATABASE_URL_SYNC=postgresql://YOUR_USER:YOUR_PASSWORD@localhost:5432/YOUR_DATABASE

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------

# Redis Connection URL (for caching and sessions)
# Format: redis://HOST:PORT/DATABASE_NUMBER
# - Database number 0 is typically used for application cache/sessions
# - If using Docker Compose: redis://localhost:6379/0
# - If using local Redis: Replace HOST and PORT if different from default
REDIS_URL=redis://localhost:6379/0

# Redis Celery Broker URL (for message queue)
# Format: redis://HOST:PORT/DATABASE_NUMBER
# - Database number 1 is used for Celery task queue (separate from app cache)
# - Celery uses this to send/receive async task messages
# - If using Docker Compose: redis://localhost:6379/1
REDIS_CELERY_BROKER_URL=redis://localhost:6379/1

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION CONFIGURATION
# -----------------------------------------------------------------------------

# JWT Secret Key (REQUIRED - CHANGE THIS IN PRODUCTION!)
# - Used to sign and verify JWT tokens
# - Must be a long, random, secure string (at least 32 characters recommended)
# - Generate a secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
# - NEVER commit the actual secret key to version control
# - Use different keys for development, staging, and production environments
JWT_SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_MIN_32_CHARS

# JWT Algorithm
# - Algorithm used to sign JWT tokens
# - HS256 (HMAC-SHA256) is recommended for most use cases
# - Do not change unless you have a specific security requirement
JWT_ALGORITHM=HS256

# JWT Access Token Expiration Time
# - How long access tokens remain valid (in minutes)
# - Shorter times improve security but require more frequent refreshes
# - 30 minutes is a common default
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# JWT Refresh Token Expiration Time
# - How long refresh tokens remain valid (in days)
# - Longer than access tokens to allow users to get new access tokens without re-login
# - 7 days is a common default
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# SERVICE PORTS
# -----------------------------------------------------------------------------

# Port numbers for each backend service
# - Each service runs on its own port
# - These ports are used internally; Nginx will route external requests
# - Change if you have port conflicts with other applications
AUTH_SERVICE_PORT=8001
BOOK_SERVICE_PORT=8002
DELIVERY_SERVICE_PORT=8003
ROBOT_SERVICE_PORT=8004
NOTIFICATION_SERVICE_PORT=8005

# -----------------------------------------------------------------------------
# API GATEWAY CONFIGURATION
# -----------------------------------------------------------------------------

# Nginx Port (external API gateway port)
# - This is the port clients will connect to
# - Nginx routes requests from this port to the appropriate service
# - Default: 8000
NGINX_PORT=8000

# API Base URL
# - Base URL for the API (used for generating absolute URLs in responses)
# - Should match the Nginx port and your hostname
# - For local development: http://localhost:8000
# - For production: https://api.yourdomain.com
API_BASE_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# ENVIRONMENT CONFIGURATION
# -----------------------------------------------------------------------------

# Environment Name
# - Current environment: development, staging, production
# - Used to enable/disable features based on environment
ENVIRONMENT=development

# Debug Mode
# - Enable detailed error messages and debugging features
# - Set to true for development, false for production
# - WARNING: Never set to true in production (exposes sensitive information)
DEBUG=true
