# =============================================================================
# LUNA Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in the actual values for your environment.
# DO NOT commit .env to version control - it contains sensitive information.
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION
# -----------------------------------------------------------------------------

# Supabase Project URL
# Get from: Supabase Dashboard > Project Settings > API > Project URL
# Format: https://YOUR_PROJECT_REF.supabase.co
SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co

# Supabase Service Role Key (for backend/server-side operations)
# Get from: Supabase Dashboard > Project Settings > API > service_role key
# WARNING: Never expose this in frontend code - it bypasses Row Level Security
SUPABASE_SERVICE_ROLE_KEY=SUPABASE_SERVICE_ROLE_KEY_PLACEHOLDER

# Supabase Anon Key (for client-side or when RLS should apply)
# Get from: Supabase Dashboard > Project Settings > API > anon key
SUPABASE_ANON_KEY=SUPABASE_ANON_KEY_PLACEHOLDER

# Shared secret for Supabase -> backend webhook calls (user deletion sync).
# Configure the same value in Supabase webhook request header: X-Webhook-Secret
SUPABASE_WEBHOOK_SECRET=CHANGE_THIS_TO_A_LONG_RANDOM_SECRET

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# Async Database Connection URL (for FastAPI services)
# Format: postgresql+asyncpg://USERNAME:PASSWORD@HOST:PORT/DATABASE_NAME
DATABASE_URL=postgresql+asyncpg://YOUR_USER:YOUR_PASSWORD@localhost:5432/YOUR_DATABASE

# Synchronous Database Connection URL (for Alembic migrations)
# YOUR_USER and YOUR_PASSWORD are placeholders for your local PostgreSQL credentials.
# Example (Docker default in this repo): postgresql://luna_user:luna_password@localhost:5432/luna_db
DATABASE_URL_SYNC=postgresql://YOUR_USER:YOUR_PASSWORD@localhost:5432/YOUR_DATABASE

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------

REDIS_URL=redis://localhost:6379/0
REDIS_CELERY_BROKER_URL=redis://localhost:6379/1

# -----------------------------------------------------------------------------
# JWT CONFIGURATION
# -----------------------------------------------------------------------------
#
# NOTE:
# Current auth implementation uses Supabase-issued JWTs.
# Keep these values for future custom JWT middleware compatibility.
# In local development, JWT_SECRET_KEY is auto-generated at auth service startup
# if left empty/placeholder. In non-development environments it is required.

JWT_SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# SERVICE PORTS
# -----------------------------------------------------------------------------

AUTH_SERVICE_PORT=8001
BOOK_SERVICE_PORT=8002
DELIVERY_SERVICE_PORT=8003
ROBOT_SERVICE_PORT=8004
NOTIFICATION_SERVICE_PORT=8005

# -----------------------------------------------------------------------------
# API GATEWAY CONFIGURATION
# -----------------------------------------------------------------------------

NGINX_PORT=8000
API_BASE_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# ENVIRONMENT CONFIGURATION
# -----------------------------------------------------------------------------

ENVIRONMENT=development
DEBUG=true
